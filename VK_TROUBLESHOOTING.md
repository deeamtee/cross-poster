# Устранение проблем с настройкой VK приложения

Если вы получаете ошибку "Выбранный способ авторизации не доступен для приложения", следуйте этим шагам:

## Шаг 1: Проверьте тип приложения

1. Перейдите в [Управление приложениями VK](https://vk.com/apps?act=manage)
2. Нажмите на ваше приложение
3. **КРИТИЧЕСКИ ВАЖНО**: Убедитесь, что это **"Standalone приложение"**
4. Если показывает "VK Mini App", "Игра" или другие типы, вам нужно создать новое Standalone приложение

## Шаг 2: Создание нового Standalone приложения (если необходимо)

1. Перейдите в [Управление приложениями VK](https://vk.com/apps?act=manage)
2. Нажмите "Создать приложение"
3. **Выберите "Standalone приложение"** (не VK Mini App или Игра)
4. Заполните:
   - **Название**: Cross-Poster (или любое предпочтительное имя)
   - **Описание**: Инструмент для кросс-постинга в социальных сетях
   - **Категория**: Выберите "Productivity" или "Social"

## Шаг 3: Настройка параметров приложения

### Основные настройки
1. Перейдите на вкладку "Настройки" в вашем приложении
2. Убедитесь, что статус приложения **"Опубликовано"** (не Черновик)
3. В **"Доверенные redirect URL"** добавьте:
   ```
   https://deeamtee.github.io/vk-oauth/
   ```

### Права доступа (ОЧЕНЬ ВАЖНО)
1. Перейдите на вкладку "Права доступа"
2. Включите следующие разрешения:
   - ✅ **Стена** - Необходимо для постинга
   - ✅ **Фотографии** - Необходимо для загрузки изображений (в будущем)
   - ✅ **Сообщества** - Необходимо для постинга в группы
   - ✅ **Оффлайн доступ** - Рекомендуется для постоянных токенов

### Сохранение всех настроек
Обязательно нажмите "Сохранить" после внесения изменений.

## Шаг 4: Проверьте статус приложения

1. Убедитесь, что ваше приложение **не в режиме черновика**
2. Приложение должно быть **опубликовано** и **активно**
3. Проверьте, что у вас есть **права администратора** для приложения

## Шаг 5: Тестирование с правильным Client ID

Ваш Client ID должен быть числовым значением (например, `51694790`), а не текстом.

## Частые проблемы и решения

### Проблема: "Приложение не найдено"
- **Решение**: Дважды проверьте правильность вашего Client ID
- Убедитесь, что используете числовой ID, а не название приложения

### Проблема: "Неверный redirect URI"
- **Решение**: Убедитесь, что redirect URI в настройках VK точно совпадает:
  ```
  https://deeamtee.github.io/vk-oauth/
  ```
- Никаких завершающих слешей или дополнительных параметров

### Проблема: "Доступ запрещен"
- **Решение**: 
  1. Убедитесь, что вы **администратор** VK группы, в которую пытаетесь постить
  2. Проверьте, что группа разрешает **постинг от администраторов**
  3. Убедитесь, что Group ID правильный (только цифры, без знака минус)

### Проблема: "Область доступа не разрешена"
- **Решение**: Перейдите в Права доступа в вашем VK приложении и включите необходимые разрешения

## Тестирование настройки

1. **Получите ваш Client ID**: Скопируйте числовой ID из настроек вашего VK приложения
2. **Добавьте в окружение**: Добавьте `VITE_VK_CLIENT_ID=ваш_client_id` в ваш файл `.env`
3. **Тестируйте OAuth**: Нажмите кнопку OAuth в приложении cross-poster
4. **Проверьте всплывающее окно**: Должно открыться всплывающее окно авторизации VK
5. **Авторизуйтесь**: Войдите и предоставьте разрешения
6. **Проверьте токен**: Токен доступа должен появиться в форме

## Если все еще не работает

1. **Попробуйте создать полностью новое Standalone приложение**
2. **Используйте другой аккаунт VK** для тестирования
3. **Проверьте статус VK API**: Иногда у VK временные проблемы
4. **Обратитесь в поддержку VK**: Если тип приложения правильный, но все еще не работает

## Пример правильной конфигурации VK приложения

```
Тип приложения: Standalone приложение
Статус: Опубликовано
Client ID: 51694790 (пример)
Доверенные Redirect URLs: https://deeamtee.github.io/vk-oauth/
Права доступа: Стена, Фотографии, Сообщества, Оффлайн доступ
```

## Отладочная информация для проверки

Когда откроется всплывающее окно OAuth, проверьте URL. Он должен выглядеть так:
```
https://oauth.vk.com/authorize?client_id=51694790&redirect_uri=https%3A//deeamtee.github.io/vk-oauth/&scope=wall&response_type=token&v=5.199&display=popup
```

Если URL выглядит по-другому или вас сразу перенаправляет на страницу ошибки, проблема в конфигурации VK приложения.